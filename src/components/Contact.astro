---
// Componente de contacto
---

<section id="contact" class="section py-24 relative overflow-hidden">
  <!-- Fondo minimalista -->
  <div class="absolute inset-0 -z-10 bg-gradient-to-b from-secondary/95 to-black"></div>
  
  <!-- Línea decorativa sutil -->
  <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-blue-500/10 to-transparent"></div>
  
  <div class="container mx-auto px-4 md:px-8">
    <div class="text-center mb-16 animate-fade-in-up">
      <h2 class="text-3xl md:text-4xl font-bold mb-5">
        <span class="text-white">Contacta</span>
        <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-blue-600"> Conmigo</span>
      </h2>
      <div class="w-16 h-0.5 bg-blue-500/40 mx-auto mb-8"></div>
      <p class="text-lg text-gray-300 max-w-2xl mx-auto">
        ¿Tienes un proyecto interesante o una oportunidad laboral? ¡Hablemos! Estoy abierto a nuevas colaboraciones.
      </p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-start">
      <div class="animate-on-scroll">
        <div class="bg-white/[0.03] backdrop-blur-sm p-6 rounded-lg border border-white/[0.05] hover:border-blue-600/20 transition-all duration-300">
          
          <div class="space-y-6">
            <div>
              <h3 class="text-xl font-semibold mb-4 text-white">Información de Contacto</h3>
              <p class="text-gray-300 mb-6 border-l border-blue-500/30 pl-4">
                No dudes en contactarme a través de cualquiera de estos medios o utilizando el formulario. Responderé a la mayor brevedad posible.
              </p>
            </div>
            
            <div class="space-y-5">
              <!-- Información de contacto - simplificada -->
              <div class="flex items-start group p-3 rounded-md hover:bg-white/[0.02] transition-colors">
                <div class="w-10 h-10 flex-shrink-0 rounded-md bg-blue-900/20 flex items-center justify-center mr-4">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                  </svg>
                </div>
                <div>
                  <h4 class="text-base font-medium mb-1 text-white">Email</h4>
                  <a href="mailto:joanlopezramirezcontact@gmail.com" class="text-gray-300 hover:text-blue-400 transition-colors">
                    joanlopezramirezcontact@gmail.com
                  </a>
                </div>
              </div>
              
              <div class="flex items-start group p-3 rounded-md hover:bg-white/[0.02] transition-colors">
                <div class="w-10 h-10 flex-shrink-0 rounded-md bg-blue-900/20 flex items-center justify-center mr-4">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                  </svg>
                </div>
                <div>
                  <h4 class="text-base font-medium mb-1 text-white">Teléfono</h4>
                  <a href="tel:+34634249274" class="text-gray-300 hover:text-blue-400 transition-colors">
                    +34 634 249 274
                  </a>
                </div>
              </div>
              
              <div class="flex items-start group p-3 rounded-md hover:bg-white/[0.02] transition-colors">
                <div class="w-10 h-10 flex-shrink-0 rounded-md bg-blue-900/20 flex items-center justify-center mr-4">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                  </svg>
                </div>
                <div>
                  <h4 class="text-base font-medium mb-1 text-white">Ubicación</h4>
                  <p class="text-gray-300">Barcelona, España</p>
                </div>
              </div>
            </div>
            
            <div class="pt-4">
              <h4 class="text-base font-medium mb-4 flex items-center">
                <div class="w-1 h-5 bg-blue-500 rounded-full mr-2"></div>
                Redes sociales
              </h4>
              <div class="flex space-x-4">
                <a href="#" class="w-10 h-10 rounded-md bg-blue-900/20 flex items-center justify-center hover:bg-blue-900/40 transition-all">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-blue-400">
                    <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                  </svg>
                </a>
                <a href="#" class="w-10 h-10 rounded-md bg-blue-900/20 flex items-center justify-center hover:bg-blue-900/40 transition-all">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-blue-400">
                    <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.237 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                  </svg>
                </a>
                <a href="#" class="w-10 h-10 rounded-md bg-blue-900/20 flex items-center justify-center hover:bg-blue-900/40 transition-all">
                  <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-blue-400">
                    <path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.893 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.501-.669-.51l-.57-.01c-.198 0-.52.074-.792.372s-1.04 1.016-1.04 2.479 1.065 2.876 1.213 3.074c.149.198 2.095 3.2 5.076 4.487.709.306 1.263.489 1.694.626.712.226 1.36.194 1.872.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="animate-on-scroll">
        <div class="bg-white/[0.03] backdrop-blur-sm p-6 rounded-lg border border-white/[0.05] hover:border-blue-600/20 transition-all duration-300">
          
          <form id="contactForm" class="space-y-5">
            <div class="mb-4">
              <h3 class="text-xl font-semibold mb-4 text-white">Envíame un mensaje</h3>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="group">
                <label for="name" class="block text-sm text-gray-300 mb-2">Nombre</label>
                <input 
                  type="text" 
                  id="name" 
                  name="name" 
                  class="w-full px-3 py-2 bg-white/[0.02] border border-white/10 rounded-md focus:outline-none focus:border-blue-500/50 transition-all text-white"
                  placeholder="Tu nombre"
                  required
                />
              </div>
              
              <div class="group">
                <label for="email" class="block text-sm text-gray-300 mb-2">Email</label>
                <input 
                  type="email" 
                  id="email" 
                  name="email" 
                  class="w-full px-3 py-2 bg-white/[0.02] border border-white/10 rounded-md focus:outline-none focus:border-blue-500/50 transition-all text-white"
                  placeholder="Tu email"
                  required
                />
              </div>
            </div>
            
            <div class="group">
              <label for="subject" class="block text-sm text-gray-300 mb-2">Asunto</label>
              <input 
                type="text" 
                id="subject" 
                name="subject" 
                class="w-full px-3 py-2 bg-white/[0.02] border border-white/10 rounded-md focus:outline-none focus:border-blue-500/50 transition-all text-white"
                placeholder="Asunto del mensaje"
                required
              />
            </div>
            
            <div class="group">
              <label for="message" class="block text-sm text-gray-300 mb-2">Mensaje</label>
              <textarea 
                id="message" 
                name="message" 
                rows="5" 
                class="w-full px-3 py-2 bg-white/[0.02] border border-white/10 rounded-md focus:outline-none focus:border-blue-500/50 transition-all text-white resize-none"
                placeholder="Tu mensaje..."
                required
              ></textarea>
            </div>
            
            <div class="mt-4">
              <div class="flex items-start">
                <div class="flex items-center h-5">
                  <input
                    id="privacy"
                    name="privacy"
                    type="checkbox"
                    required
                    class="w-4 h-4 bg-white/5 border-white/10 rounded"
                  />
                </div>
                <div class="ml-3 text-sm">
                  <label for="privacy" class="text-gray-400">
                    He leído y acepto la <button type="button" id="openPrivacyModal" class="text-blue-400 hover:underline transition-colors">Política de Privacidad</button>
                  </label>
                </div>
              </div>
            </div>
            
            <div class="mt-6">
              <button 
                type="submit" 
                id="submitBtn"
                class="w-full px-4 py-3 bg-blue-700/20 hover:bg-blue-700/30 border border-blue-600/30 text-white transition-all duration-300 rounded-md flex justify-center items-center"
              >
                <span class="flex items-center justify-center">
                  <span>Enviar Mensaje</span>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H3a1 1 0 110-2h9.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </span>
              </button>
              <div id="formStatus" class="mt-4 text-center hidden">
                <p id="successMessage" class="text-green-400 hidden">¡Mensaje enviado correctamente! Te responderé lo antes posible.</p>
                <p id="errorMessage" class="text-red-400 hidden">Ha ocurrido un error al enviar el mensaje. Por favor, inténtalo de nuevo.</p>
              </div>
            </div>
          </form>
          <div class="mt-4 text-xs text-center text-gray-500">
            Este sitio está protegido por reCAPTCHA y aplican la <a href="https://policies.google.com/privacy" target="_blank" class="text-blue-400 hover:text-blue-300 hover:underline transition-colors">Política de Privacidad</a> y los <a href="https://policies.google.com/terms" target="_blank" class="text-blue-400 hover:text-blue-300 hover:underline transition-colors">Términos de Servicio</a> de Google.
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Script de Google reCAPTCHA v3 -->
<script is:inline src="https://www.google.com/recaptcha/api.js?render=6LeMvXMrAAAAAEp0qnt_lauMtoVD1wtzViTAEEru&badge=invisible"></script>

<!-- Eliminar cualquier badge de reCAPTCHA que pueda aparecer -->
<div style="display: none; visibility: hidden; opacity: 0; width: 0; height: 0; position: absolute; left: -9999px; z-index: -9999;">
  <div class="grecaptcha-badge"></div>
</div>

<script>
  // Definir el tipo para grecaptcha
  declare const grecaptcha: {
    ready: (callback: () => void) => void;
    execute: (siteKey: string, options: { action: string }) => Promise<string>;
  };

  document.addEventListener('DOMContentLoaded', () => {
    const contactForm = document.getElementById('contactForm') as HTMLFormElement;
    const submitBtn = document.getElementById('submitBtn') as HTMLButtonElement;
    const formStatus = document.getElementById('formStatus') as HTMLDivElement;
    const successMessage = document.getElementById('successMessage') as HTMLParagraphElement;
    const errorMessage = document.getElementById('errorMessage') as HTMLParagraphElement;
    
    // URL del webhook de n8n
    const n8nWebhookUrl = 'https://jlopez5.app.n8n.cloud/webhook/joanlopezcontact';
    
    // reCAPTCHA site key (clave real del sitio)
    const recaptchaSiteKey = '6LeMvXMrAAAAAEp0qnt_lauMtoVD1wtzViTAEEru';
    
    // Ejecutar reCAPTCHA cuando se envíe el formulario
    if (contactForm && submitBtn && formStatus && successMessage && errorMessage) {
      contactForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // Verificar que se ha aceptado la política de privacidad
        const privacyCheckbox = document.getElementById('privacy') as HTMLInputElement;
        if (!privacyCheckbox.checked) {
          formStatus.classList.remove('hidden');
          errorMessage.classList.remove('hidden');
          errorMessage.textContent = 'Debes aceptar la política de privacidad para continuar.';
          successMessage.classList.add('hidden');
          return;
        }
        
        // Deshabilitar el botón mientras se ejecuta reCAPTCHA
        submitBtn.disabled = true;
        submitBtn.innerHTML = '<span class="flex items-center justify-center">Verificando... <svg class="animate-spin h-5 w-5 ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></span>';
        
        try {
          // Ejecutar reCAPTCHA
          grecaptcha.ready(function() {
            grecaptcha.execute(recaptchaSiteKey, {action: 'submit'}).then(function(token) {
              // Procesar el envío del formulario con el token
              handleFormSubmit(token);
            });
          });
        } catch (error) {
          console.error('Error con reCAPTCHA:', error);
          // Mostrar mensaje de error
          formStatus.classList.remove('hidden');
          errorMessage.classList.remove('hidden');
          errorMessage.textContent = 'Error al verificar reCAPTCHA. Por favor, inténtalo de nuevo.';
          successMessage.classList.add('hidden');
          
          // Restaurar el botón
          submitBtn.disabled = false;
          submitBtn.innerHTML = '<span class="flex items-center justify-center">Enviar Mensaje <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2 group-hover:translate-x-1 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H3a1 1 0 110-2h9.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg></span>';
        }
      });
    }
    
    // Ocultar el badge de reCAPTCHA cuando la página se carga
    document.addEventListener('DOMContentLoaded', function() {
      const recaptchaBadge = document.querySelector('.grecaptcha-badge');
      if (recaptchaBadge) {
        (recaptchaBadge as HTMLElement).style.visibility = 'hidden';
      }
    });
    
    async function handleFormSubmit(token: string) {
      // Cambiar el texto del botón a "Enviando"
      submitBtn.innerHTML = '<span class="flex items-center justify-center">Enviando... <svg class="animate-spin h-5 w-5 ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></span>';
      
      // Recoger los datos del formulario
      const formData = new FormData(contactForm);
      const formDataObj: Record<string, string> = {};
      formData.forEach((value, key) => {
        formDataObj[key] = value.toString();
      });
      
      // Añadir la respuesta del captcha a los datos
      formDataObj['g-recaptcha-response'] = token;
      
      try {
        // Enviar los datos a n8n
        const response = await fetch(n8nWebhookUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(formDataObj)
        });
        
        if (response.ok) {
          // Mostrar mensaje de éxito
          formStatus.classList.remove('hidden');
          successMessage.classList.remove('hidden');
          errorMessage.classList.add('hidden');
          contactForm.reset();
        } else {
          // Mostrar mensaje de error
          formStatus.classList.remove('hidden');
          errorMessage.classList.remove('hidden');
          successMessage.classList.add('hidden');
        }
      } catch (error) {
        console.error('Error al enviar el formulario:', error);
        // Mostrar mensaje de error
        formStatus.classList.remove('hidden');
        errorMessage.classList.remove('hidden');
        successMessage.classList.add('hidden');
      }
      
      // Restaurar el botón
      submitBtn.disabled = false;
      submitBtn.innerHTML = '<span class="flex items-center justify-center">Enviar Mensaje <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2 group-hover:translate-x-1 transition-transform" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H3a1 1 0 110-2h9.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg></span>';
    }
  });
</script>

<style>
  /* Ocultar el badge de reCAPTCHA - CSS mejorado */
  .grecaptcha-badge { 
    visibility: hidden !important; 
    opacity: 0 !important;
    display: none !important;
    z-index: -9999 !important;
    width: 0 !important;
    height: 0 !important;
    position: absolute !important;
    left: -9999px !important;
  }
  
  /* Estilos para el modal */
  #privacyModal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    overflow-y: auto;
    padding: 20px;
  }
  
  /* Ocultar cualquier elemento de reCAPTCHA que pueda ser visible */
  .rc-anchor-container, 
  .rc-anchor-normal,
  .rc-anchor-light,
  .rc-anchor-dark,
  iframe[src*="recaptcha"],
  div[style*="z-index: 2000000000"] {
    opacity: 0 !important;
    visibility: hidden !important;
    pointer-events: none !important;
    position: absolute !important;
    width: 0px !important;
    height: 0px !important;
    transform: scale(0) !important;
    z-index: -9999 !important;
    left: -9999px !important;
  }
  
  .modal-content {
    background: linear-gradient(135deg, rgba(17, 24, 39, 0.95), rgba(30, 58, 138, 0.95));
    backdrop-filter: blur(8px);
    margin: 5% auto;
    padding: 30px;
    border-radius: 12px;
    max-width: 800px;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.1);
    animation: modalFadeIn 0.3s ease-out;
  }
  
  @keyframes modalFadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }
  
  .modal-body {
    max-height: 60vh;
    overflow-y: auto;
    padding-right: 10px;
  }
  
  .modal-body::-webkit-scrollbar {
    width: 6px;
  }
  
  .modal-body::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
  }
  
  .modal-body::-webkit-scrollbar-thumb {
    background: rgba(99, 102, 241, 0.6);
    border-radius: 10px;
  }
  
  .modal-footer {
    margin-top: 20px;
    padding-top: 15px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: flex-end;
  }
  
  .close-modal-btn {
    background-color: transparent;
    border: none;
    cursor: pointer;
    color: rgba(255, 255, 255, 0.6);
    transition: all 0.2s;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .close-modal-btn:hover {
    color: white;
    background-color: rgba(255, 255, 255, 0.1);
  }
  
  .modal-body h3 {
    color: white;
    font-size: 1.25rem;
    font-weight: 600;
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  .modal-body p {
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 1rem;
    line-height: 1.6;
  }
  
  .modal-body ul {
    list-style-type: disc;
    padding-left: 1.5rem;
    margin-bottom: 1rem;
  }
  
  .modal-body li {
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 0.5rem;
  }
</style>

<!-- Modal de política de privacidad -->
<div id="privacyModal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="text-2xl font-bold text-white">Política de Privacidad</h2>
      <button id="closePrivacyModal" class="close-modal-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="modal-body">
      <p>Última actualización: <span id="currentDate"></span></p>
      
      <h3>1. Información que recopilamos</h3>
      <p>Cuando utiliza el formulario de contacto de nuestro sitio web, recopilamos la siguiente información personal que usted proporciona voluntariamente:</p>
      <ul>
        <li>Nombre</li>
        <li>Dirección de correo electrónico</li>
        <li>Asunto del mensaje</li>
        <li>Contenido del mensaje</li>
      </ul>
      
      <h3>2. Cómo utilizamos su información</h3>
      <p>La información que recopilamos se utiliza únicamente para los siguientes propósitos:</p>
      <ul>
        <li>Responder a sus consultas, comentarios o solicitudes</li>
        <li>Proporcionarle información sobre nuestros servicios que haya solicitado</li>
        <li>Mejorar la experiencia del usuario en nuestro sitio web</li>
        <li>Proteger nuestro sitio web contra actividades fraudulentas o maliciosas</li>
      </ul>
      <p>No compartiremos, venderemos, alquilaremos ni revelaremos su información personal a terceros, excepto cuando sea necesario para cumplir con las leyes aplicables o para proteger nuestros derechos legales.</p>
      
      <h3>3. Base legal para el procesamiento</h3>
      <p>Procesamos sus datos personales con base en su consentimiento explícito al marcar la casilla correspondiente antes de enviar el formulario de contacto, de acuerdo con el Reglamento General de Protección de Datos (RGPD) de la UE.</p>
      
      <h3>4. Almacenamiento y seguridad de datos</h3>
      <p>Sus datos personales se almacenan en servidores seguros y se mantienen solo durante el tiempo necesario para cumplir con los propósitos para los que fueron recopilados o según lo exija la ley aplicable.</p>
      <p>Implementamos medidas de seguridad técnicas y organizativas apropiadas para proteger sus datos personales contra el acceso, uso, divulgación, alteración o destrucción no autorizados.</p>
      
      <h3>5. Sus derechos</h3>
      <p>De acuerdo con el RGPD y otras leyes de protección de datos aplicables, usted tiene los siguientes derechos con respecto a sus datos personales:</p>
      <ul>
        <li>Derecho de acceso a sus datos personales</li>
        <li>Derecho a rectificar datos inexactos</li>
        <li>Derecho a la eliminación de sus datos ("derecho al olvido")</li>
        <li>Derecho a restringir el procesamiento de sus datos</li>
        <li>Derecho a la portabilidad de datos</li>
        <li>Derecho a oponerse al procesamiento</li>
        <li>Derecho a retirar su consentimiento en cualquier momento</li>
      </ul>
      <p>Para ejercer cualquiera de estos derechos, por favor contáctenos a través de los datos de contacto proporcionados en este sitio web.</p>
      
      <h3>6. Uso de cookies y tecnologías similares</h3>
      <p>Nuestro sitio web utiliza Google reCAPTCHA para proteger nuestro formulario de contacto contra spam y abuso. Esta tecnología puede recopilar cierta información técnica sobre su dispositivo y su comportamiento en nuestro sitio web para determinar si usted es un usuario humano o un bot automatizado.</p>
      <p>Para más información sobre cómo Google procesa sus datos, consulte la <a href="https://policies.google.com/privacy" target="_blank" class="text-primary hover:underline">Política de Privacidad de Google</a>.</p>
      
      <h3>7. Transferencias internacionales de datos</h3>
      <p>Sus datos personales pueden ser transferidos y procesados en países fuera del Espacio Económico Europeo (EEE) que pueden no proporcionar el mismo nivel de protección de datos. En tales casos, nos aseguramos de que existan salvaguardas adecuadas para proteger sus datos personales de acuerdo con esta política de privacidad y las leyes aplicables.</p>
      
      <h3>8. Cambios a esta política de privacidad</h3>
      <p>Podemos actualizar esta política de privacidad periódicamente para reflejar cambios en nuestras prácticas de información o para cumplir con requisitos legales. La versión más reciente estará siempre disponible en nuestro sitio web con la fecha de la última actualización.</p>
      
      <h3>9. Cómo contactarnos</h3>
      <p>Si tiene alguna pregunta, comentario o solicitud relacionada con esta política de privacidad o el procesamiento de sus datos personales, no dude en ponerse en contacto con nosotros a través de la información de contacto proporcionada en este sitio web.</p>
    </div>
    <div class="modal-footer">
      <button id="acceptPrivacyPolicy" class="btn btn-primary">Aceptar</button>
    </div>
  </div>
</div>

<script>
  // Script para manejar el modal de política de privacidad
  document.addEventListener('DOMContentLoaded', () => {
    const privacyModal = document.getElementById('privacyModal');
    const openPrivacyModal = document.getElementById('openPrivacyModal');
    const closePrivacyModal = document.getElementById('closePrivacyModal');
    const acceptPrivacyPolicy = document.getElementById('acceptPrivacyPolicy');
    const privacyCheckbox = document.getElementById('privacy') as HTMLInputElement;
    const currentDateElement = document.getElementById('currentDate');
    
    // Establecer la fecha actual
    if (currentDateElement) {
      const now = new Date();
      currentDateElement.textContent = now.toLocaleDateString('es-ES', { year: 'numeric', month: 'long', day: 'numeric' });
    }
    
    // Abrir el modal
    if (openPrivacyModal && privacyModal) {
      openPrivacyModal.addEventListener('click', (e) => {
        e.preventDefault();
        privacyModal.style.display = 'block';
        document.body.style.overflow = 'hidden'; // Prevenir scroll del body
      });
    }
    
    // Cerrar el modal
    if (closePrivacyModal && privacyModal) {
      closePrivacyModal.addEventListener('click', () => {
        privacyModal.style.display = 'none';
        document.body.style.overflow = ''; // Restaurar scroll del body
      });
    }
    
    // Cerrar el modal al hacer clic fuera de su contenido
    if (privacyModal) {
      privacyModal.addEventListener('click', (e) => {
        if (e.target === privacyModal) {
          privacyModal.style.display = 'none';
          document.body.style.overflow = ''; // Restaurar scroll del body
        }
      });
    }
    
    // Aceptar política de privacidad
    if (acceptPrivacyPolicy && privacyModal && privacyCheckbox) {
      acceptPrivacyPolicy.addEventListener('click', () => {
        privacyCheckbox.checked = true;
        privacyModal.style.display = 'none';
        document.body.style.overflow = ''; // Restaurar scroll del body
      });
    }
    
    // Cerrar el modal con tecla ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && privacyModal && privacyModal.style.display === 'block') {
        privacyModal.style.display = 'none';
        document.body.style.overflow = ''; // Restaurar scroll del body
      }
    });
  });
</script>